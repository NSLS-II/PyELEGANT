author: 'Yoshiteru Hidaka'
print_versions: True
E_MeV: 3e3
input_LTE:
    load_param: False
    # If "load_param" is True, you must specify "base_filepath" (%s.lte) and "param_filepath" (%s.param)
    base_filepath:
        "/GPFS/APC/yhidaka/git_repos/nsls2cb/20200123_opt_CLS/\
        moga_prod_v1/lattice3_CLSScale_36pm_mod_opt2020-01-23T16-09-20_KickElems.lte"
    param_filepath: '/GPFS/APC/yhidaka/git_repos/nsls2cb/20200123_opt_CLS/moga_prod_v1/moga-002708.param'
    #
    generate_zeroSexts: False
    #
    filepath: 'CLSmod23pm_20200123T160920_moga_prod_v1_002708.lte'
    zeroSexts_filepath: 'CLSmod23pm_20200123T160920_moga_prod_v1_002708_ZeroSexts.lte'
lattice_prop:
    recalc: False
    #
    use_beamline_cell: 'CELL'
    use_beamline_ring: &use_beamline_ring 'RING'
    element_divisions: 10
    twiss_plot_opts:
    - {print_scalars: [], right_margin_adj: 0.85,}
    - &zoom_in
      {print_scalars: [], slim: [0, 9], right_margin_adj: 0.85,
       disp_elem_names: {bends: True, quads: True, sexts: True,
                         font_size: 8, extra_dy_frac: 0.05},
      }
    - <<: *zoom_in
      slim: [4, 16]
    - <<: *zoom_in
      slim: [14, 23]
    twiss_plot_captions:
    - 'Twiss functions for 2 cells (1 super-period).'
    - ['Twiss functions (', 'MathText("0 < s < 9")', ')']
    - ['Twiss functions (', 'MathText("4 < s < 16")', ')']
    - ['Twiss functions (', 'MathText("14 < s < 23")', ')']
    beta_elem_names:
    - 'M_LS'
    - 'M_SS'
    #phase_adv_elem_names_indexes:
    #    'LS & SS': ['M_LS', 0, 'M_SS', 0]
    floor_elem_names_indexes:
        SS: ['M_SS', 0]
        LS: ['M_LS', 1] # Must pick the 2nd index
    length_elem_names:
        'L@Short Straight': ['OLONG1', 'OS2B', 'OLONG2']
        'L@Long Straight' : ['OLONG2', 'OS2B', 'OLONG1']

nonlin:
    include:
        fmap_xy: True # On-Momentum Frequency Map
        fmap_px: True # Off-Momentum Frequency Map
        cmap_xy: True # On-Momentum Chaos Map
        cmap_px: True # Off-Momentum Chaos Map
        tswa: True # Tune Shift with Amplitude
        nonlin_chrom: True # Nonlinear Chromaticity
    recalc: # Will re-calculate potentially time-consuming data
        fmap_xy: False # On-Momentum Frequency Map
        fmap_px: False # Off-Momentum Frequency Map
        cmap_xy: False # On-Momentum Chaos Map
        cmap_px: False # Off-Momentum Chaos Map
        tswa: False # Tune Shift with Amplitude
        nonlin_chrom: False # Nonlinear Chromaticity
    replot: # Will re-plot and save plotss as PDF files
        fmap_xy: False # On-Momentum Frequency Map
        fmap_px: False # Off-Momentum Frequency Map
        cmap_xy: False # On-Momentum Chaos Map
        cmap_px: False # Off-Momentum Chaos Map
        tswa: True # Tune Shift with Amplitude
        nonlin_chrom: False # Nonlinear Chromaticity
    #
    # Common options:
    use_beamline: *use_beamline_ring
    N_KICKS: {KQUAD: 40, KSEXT: 8, CSBEND: 12}
    #
    # Common parallel options (can be overwritten in the options block
    # for each specific calculation type):
    common_remote_opts:
        partition: 'short'
        #ntasks: 200
        ntasks: 50
        # nodelist: ['apcpu-004']
        # time: '2:00:00'
        mail_type_end: False
        mail_user: &email_address 'your_username@bnl.gov'
    #
    # List of 2-D grid specs for fmap & cmap calculations:
    xy_grids:
        xyTest:
            xmin: -8e-3
            xmax: +8e-3
            ymin: 0.0
            ymax: +2e-3
            nx: 21
            ny: 21
            # Optional (below)
            x_offset: 1e-6
            y_offset: 1e-6
            delta_offset: 0.0
        xy1:
            xmin: -8e-3
            xmax: +8e-3
            ymin: 0.0
            ymax: +2e-3
            nx: 201
            ny: 201
            # Optional (below)
            x_offset: 1e-6
            y_offset: 1e-6
            delta_offset: 0.0
    px_grids:
        pxTest:
            delta_min: -0.05
            delta_max: +0.05
            xmin: -8e-3
            xmax: +8e-3
            ndelta: 21
            nx: 21
            # Optional (below)
            x_offset: 1e-6
            y_offset: 1e-6
            delta_offset: 0.0
        px1:
            delta_min: -0.05
            delta_max: +0.05
            xmin: -8e-3
            xmax: +8e-3
            ndelta: 201
            nx: 201
            # Optional (below)
            x_offset: 1e-6
            y_offset: 1e-6
            delta_offset: 0.0
    #
    # Options specific only for on-momentum frequency map calculation:
    fmap_xy_calc_opts:
        grid_name: 'xyTest'
        #grid_name: 'xy1'
        n_turns: 1024
        # remote_opts:
        #     ntasks: 200
    # Options specific only for off-momentum frequency map calculation
    fmap_px_calc_opts:
        grid_name: 'pxTest'
        #grid_name: 'px1'
        n_turns: 1024
    # Options specific only for on-momentum chaos map calculation
    cmap_xy_calc_opts:
        grid_name: 'xyTest'
        #grid_name: 'xy1'
        n_turns: 128
    # Options specific only for off-momentum chaos map calculation
    cmap_px_calc_opts:
        grid_name: 'pxTest'
        #grid_name: 'px1'
        n_turns: 128
    #
    # List of 1-D grid specs for tune-shift-with-amplitude calculation:
    tswa_grids:
        xy1:
            abs_xmax: 1e-3
            nx: 100
            abs_ymax: 0.5e-3
            ny: 50
            # Optional (below)
            x_offset: 1e-6
            y_offset: 1e-6
    # Options specific only for tune-shift-with-amplitude calculation
    tswa_calc_opts:
        grid_name: 'xy1'
        n_turns: 1024
        remote_opts:
            partition: 'short'
            time: '7:00'
    #
    # List of 1-D grid specs for nonlinear chromaticity calculation:
    nonlin_chrom_grids:
        p1:
            delta_min: -4e-2
            delta_max: +3e-2
            ndelta: 50
            # Optional (below)
            x_offset: 1e-6
            y_offset: 1e-6
            delta_offset: 0.0
    # Options specific only for nonlinear chromaticity calculation
    nonlin_chrom_calc_opts:
        grid_name: 'p1'
        n_turns: 1024
        remote_opts:
            partition: 'short'
            time: '7:00'
